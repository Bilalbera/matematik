<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matematik Ustası</title>
    <style>
        body { 
            font-family: 'Segoe UI', sans-serif; 
            display: flex; justify-content: center; align-items: center; 
            height: 100vh; margin: 0; 
            background: #121212; color: white;
            overflow: hidden;
            transition: background 0.2s;
        }

        .container { 
            background: #1e1e1e; padding: 30px; 
            border-radius: 25px; box-shadow: 0 20px 50px rgba(0,0,0,0.5); 
            text-align: center; width: 380px; border: 1px solid #333;
            position: relative;
        }

        /* Menü ve Butonlar */
        .difficulty-container { display: flex; flex-direction: column; gap: 12px; margin-top: 20px; }
        .btn {
            border: none; padding: 15px; font-size: 1rem; 
            border-radius: 12px; cursor: pointer; transition: 0.3s;
            font-weight: bold; color: white;
        }
        .btn:hover { transform: scale(1.05); filter: brightness(1.2); }
        .kolay { background: #27ae60; }
        .orta { background: #2980b9; }
        .zor { background: #8e44ad; }
        .imkansiz { background: #c0392b; }

        /* Oyun Ekranı */
        #game-screen { display: none; }
        #question { font-size: 4rem; margin: 10px 0; font-weight: bold; }
        input { 
            width: 80%; padding: 15px; font-size: 2rem; 
            border: none; border-radius: 15px; background: #333;
            color: white; text-align: center; outline: none; margin-bottom: 20px;
        }

        /* OYUN BİTTİ EKRANI (MODAL) */
        #result-modal {
            display: none; /* Başlangıçta gizli */
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(30, 30, 30, 0.95);
            border-radius: 25px;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        
        #result-modal h2 { color: #ff4e50; font-size: 2rem; margin-bottom: 5px; }
        #result-modal p { font-size: 1.5rem; margin-bottom: 25px; }
        .btn-ok { background: #00d2ff; width: 60%; }

        /* Efektler */
        .correct-flash { background: #1b4332 !important; }
    </style>
</head>
<body>

<div class="container">
    <div id="menu-screen">
        <h1>MATEMATİK USTASI</h1>
        <div class="difficulty-container">
            <button class="btn kolay" onclick="startGame('kolay')">KOLAY</button>
            <button class="btn orta" onclick="startGame('orta')">ORTA</button>
            <button class="btn zor" onclick="startGame('zor')">ZOR</button>
            <button class="btn imkansiz" onclick="startGame('imkansiz')">İMKANSIZ</button>
        </div>
    </div>

    <div id="game-screen">
        <div id="question">?</div>
        <input type="number" id="answer" placeholder="?" autocomplete="off">
        <div style="display:flex; justify-content: space-around;">
            <span>Skor: <span id="score" style="color:#00d2ff">0</span></span>
            <span>Süre: <span id="timer" style="color:#ff4e50">30</span>s</span>
        </div>
    </div>

    <div id="result-modal">
        <h2>Oyun Bitti!</h2>
        <p id="final-score-text">Skorun: 0</p>
        <button class="btn btn-ok" onclick="resetGame()">TAMAM</button>
    </div>
</div>

<script>
    let score = 0, timeLeft = 30, correctAnswer, timerInterval, currentDifficulty = '';
    
    const settings = {
        'kolay': { range: 10, time: 30 },
        'orta': { range: 40, time: 25 },
        'zor': { range: 80, time: 20 },
        'imkansiz': { range: 200, time: 15 }
    };

    function startGame(diff) {
        currentDifficulty = diff;
        document.getElementById('menu-screen').style.display = 'none';
        document.getElementById('game-screen').style.display = 'block';
        document.getElementById('result-modal').style.display = 'none';
        
        score = 0;
        timeLeft = settings[diff].time;
        updateUI();
        generateQuestion();
        startTimer();
    }

    function generateQuestion() {
        const range = settings[currentDifficulty].range;
        const n1 = Math.floor(Math.random() * range) + 1;
        const n2 = Math.floor(Math.random() * range) + 1;
        correctAnswer = n1 + n2;
        document.getElementById('question').innerText = `${n1} + ${n2}`;
        document.getElementById('answer').value = '';
        document.getElementById('answer').focus();
    }

    document.getElementById('answer').addEventListener('input', function() {
        if (this.value == correctAnswer) {
            score += 10;
            flash();
            updateUI();
            generateQuestion();
        }
    });

    function flash() {
        document.body.classList.add('correct-flash');
        setTimeout(() => document.body.classList.remove('correct-flash'), 150);
    }

    function updateUI() {
        document.getElementById('score').innerText = score;
        document.getElementById('timer').innerText = timeLeft;
    }

    function startTimer() {
        timerInterval = setInterval(() => {
            timeLeft--;
            updateUI();
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                showResult();
            }
        }, 1000);
    }

    function showResult() {
        // Oyun bitti ekranını göster
        document.getElementById('final-score-text').innerText = "Skorun: " + score;
        document.getElementById('result-modal').style.display = 'flex';
        document.getElementById('game-screen').style.opacity = '0.2'; // Arkayı hafif karart
    }

    function resetGame() {
        // Sayfayı yenilemek yerine her şeyi başa sarar
        document.getElementById('result-modal').style.display = 'none';
        document.getElementById('game-screen').style.display = 'none';
        document.getElementById('game-screen').style.opacity = '1';
        document.getElementById('menu-screen').style.display = 'block';
    }
</script>

</body>
</html>
