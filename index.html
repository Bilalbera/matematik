<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matematik Yarışı</title>
    <style>
        body { 
            font-family: 'Segoe UI', sans-serif; 
            display: flex; justify-content: center; align-items: center; 
            height: 100vh; margin: 0; 
            background: #121212; color: white;
            transition: background 0.3s;
        }

        .container { 
            background: #1e1e1e; padding: 40px; 
            border-radius: 30px; box-shadow: 0 20px 60px rgba(0,0,0,0.6); 
            text-align: center; width: 350px; border: 1px solid #333;
            position: relative;
        }

        h1 { color: #00d2ff; letter-spacing: 2px; margin-bottom: 30px; }

        .btn {
            border: none; padding: 18px; font-size: 1.2rem; 
            border-radius: 15px; cursor: pointer; transition: 0.3s;
            font-weight: bold; color: white; width: 100%;
            margin-bottom: 15px;
        }
        .btn-start { background: #00d2ff; color: #121212; font-size: 1.4rem; }
        .btn-start:hover { transform: scale(1.05); background: #00b4db; }

        #difficulty-menu { display: none; flex-direction: column; gap: 10px; animation: slideUp 0.4s; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Zorluk Renkleri */
        .kolay { background: #2ecc71; }
        .orta { background: #f1c40f; color: #333; }
        .zor { background: #e67e22; }

        #game-screen { display: none; }
        #question { font-size: 4.5rem; margin: 10px 0; font-weight: bold; }
        input { 
            width: 80%; padding: 15px; font-size: 2rem; 
            border: 2px solid #333; border-radius: 15px; background: #252525;
            color: white; text-align: center; outline: none; margin-bottom: 15px;
        }
        input:focus { border-color: #00d2ff; }

        #result-modal {
            display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: #1e1e1e; border-radius: 30px;
            flex-direction: column; justify-content: center; align-items: center; z-index: 10;
        }
        
        .result-info { font-size: 1.4rem; margin: 5px 0; }
        .correct-flash { background: #1b4332 !important; }
        .wrong-flash { background: #431b1b !important; }
    </style>
</head>
<body>

<div class="container">
    <div id="main-menu">
        <h1>MATEMATİK YARIŞI</h1>
        <button class="btn btn-start" onclick="showDifficulties()">YARIŞA BAŞLA</button>
    </div>

    <div id="difficulty-menu">
        <h2 style="color: #00d2ff;">Zorluk Seç</h2>
        <button class="btn kolay" onclick="startGame(10, 30, 'Kolay', '#2ecc71')">KOLAY</button>
        <button class="btn orta" onclick="startGame(50, 25, 'Orta', '#f1c40f')">ORTA</button>
        <button class="btn zor" onclick="startGame(100, 20, 'Zor', '#e67e22')">ZOR</button>
    </div>

    <div id="game-screen">
        <div id="question">?</div>
        <input type="number" id="answer" placeholder="Cevap" autocomplete="off">
        <button class="btn btn-start" onclick="checkAnswer()" style="padding: 10px; font-size: 1rem;">GÖNDER (Enter)</button>
        <div style="display:flex; justify-content: space-around; font-size: 1.2rem; margin-top: 10px;">
            <span>Skor: <span id="score" style="color:#00d2ff">0</span></span>
            <span>Süre: <span id="timer" style="color:#ff4e50">30</span>s</span>
        </div>
    </div>

    <div id="result-modal">
        <h2 style="color: #ff4e50; font-size: 2.5rem; margin-bottom: 10px;">Süre Doldu!</h2>
        <p id="final-score" class="result-info">Skorun: 0</p>
        <p id="final-diff" class="result-info" style="font-weight: bold; margin-bottom: 30px;">Zorluk: Kolay</p>
        <button class="btn btn-start" onclick="location.reload()">ANA MENÜ</button>
    </div>
</div>

<script>
    let score = 0, timeLeft = 30, correctAnswer, timerInterval, maxNum = 10;
    let currentDiffLabel = '', currentDiffColor = '';

    function showDifficulties() {
        document.getElementById('main-menu').style.display = 'none';
        document.getElementById('difficulty-menu').style.display = 'flex';
    }

    function startGame(range, time, label, color) {
        maxNum = range;
        timeLeft = time;
        currentDiffLabel = label;
        currentDiffColor = color;
        document.getElementById('difficulty-menu').style.display = 'none';
        document.getElementById('game-screen').style.display = 'block';
        
        generateQuestion();
        startTimer();
    }

    function generateQuestion() {
        const n1 = Math.floor(Math.random() * maxNum) + 1;
        const n2 = Math.floor(Math.random() * maxNum) + 1;
        correctAnswer = n1 + n2;
        document.getElementById('question').innerText = `${n1} + ${n2}`;
        document.getElementById('answer').value = '';
        document.getElementById('answer').focus();
    }

    // Cevap kontrol fonksiyonu (Buton ve Enter için)
    function checkAnswer() {
        const inputField = document.getElementById('answer');
        const userAnswer = parseInt(inputField.value);

        if (userAnswer === correctAnswer) {
            score += 10;
            document.getElementById('score').innerText = score;
            flash('correct-flash');
            generateQuestion();
        } else {
            flash('wrong-flash');
            inputField.value = '';
            inputField.focus();
        }
    }

    // Enter tuşu dinleyici
    document.getElementById('answer').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            checkAnswer();
        }
    });

    function flash(className) {
        document.body.classList.add(className);
        setTimeout(() => document.body.classList.remove(className), 150);
    }

    function startTimer() {
        timerInterval = setInterval(() => {
            timeLeft--;
            document.getElementById('timer').innerText = timeLeft;
            if (timeLeft <= 0) {
                clearInterval(timerInterval);
                showResult();
            }
        }, 1000);
    }

    function showResult() {
        document.getElementById('game-screen').style.display = 'none';
        document.getElementById('final-score').innerText = "Skorun: " + score;
        
        // Zorluk metnini ve rengini ayarla
        const diffElement = document.getElementById('final-diff');
        diffElement.innerText = "Zorluk: " + currentDiffLabel;
        diffElement.style.color = currentDiffColor;
        
        document.getElementById('result-modal').style.display = 'flex';
    }
</script>

</body>
</html>
